TeXgraph#
{version 2.0}
Cmd
	Window(-5+5*i, 5-5*i, 1+i); 
	Margin(0, 0, 0, 0);
	Border(0);
	[OriginalCoord(1), IdMatrix()];
	[theta:=0.5236, phi:=1.0472, IdMatrix3D(), ModelView(ortho)];
	[GrayScale(0), ComptGraph:=0];

Var
    Last = [0.507151709484515+1.86185679991918*i,0.416721651753501+1.90903413850077*i,
	0.32195631507262+1.94675452530466*i,0.223841571348363+1.97462554395845*i,
	0.12339813736218+1.99235724398804*i,0.0216709559510494+1.99976515725853*i,
	-0.0802816748428117+1.99677221705083*i,-0.181399111560383+1.9834095598097*i,
	-0.280629399514355+1.95981620122199*i,-0.376940216585762+1.92623758999529*i,
	-0.469329612777199+1.88302305438216*i,-0.55683643379583+1.83062216801476*i,
	-0.6385503202266+1.76958007285695*i,-0.713621178271251+1.70053180793077*i,
	-0.781268023526262+1.62419570281713*i,-0.840787105795249+1.5413659046601*i,
	-0.891559230411002+1.45290411641863*i,-0.933056199901277+1.35973063231505*i,
	-0.964846308983762+1.26281476374133*i,-0.986598835724192+1.16316475522511*i,
	-0.998087482134718+1.06181729536286*i,-0.999192728419006+0.959826731840896*i,
	-0.989903076372124+0.858254102743662*i,-0.970315168999786+0.758156098259812*i,
	-0.940632785112488+0.660574067620748*i,-0.901164719354106+0.566523185635685*i,
	-0.85232156971962+0.476981891526992*i,-0.794611465982379+0.392881709936742*i,
	-0.728634783469352+0.31509755999955*i,-0.655077897178521+0.244438653299305*i,
	-0.574706041216182+0.181640075401034*i,-0.48835534783956+0.127355138537731*i,
	-0.396924148924925+0.0821485850094124*i,-0.301363630354623+0.0464907120014604*i,
	-0.202667936548204+0.0207524789435036*i,-0.101863828083143+0.00520164830843839*i,
	0.101863828083137+0.00520164830843783*i,0.202667936548198+0.0207524789435025*i,
	0.301363630354618+0.0464907120014586*i,0.39692414892492+0.08214858500941*i,
	0.488355347839554+0.127355138537728*i,0.574706041216177+0.181640075401031*i,
	0.655077897178516+0.244438653299301*i,0.728634783469348+0.315097559999546*i,
	0.794611465982375+0.392881709936737*i,0.852321569719617+0.476981891526987*i,
	0.901164719354104+0.566523185635679*i,0.940632785112486+0.660574067620742*i,
	0.970315168999784+0.758156098259807*i,0.989903076372123+0.858254102743657*i,
	0.999192728419005+0.95982673184089*i,0.998087482134719+1.06181729536285*i,
	0.986598835724193+1.1631647552251*i,0.964846308983764+1.26281476374132*i,
	0.933056199901279+1.35973063231505*i,0.891559230411005+1.45290411641863*i,
	0.840787105795252+1.5413659046601*i,0.781268023526266+1.62419570281712*i,
	0.713621178271256+1.70053180793076*i,0.638550320226605+1.76958007285694*i,
	0.556836433795835+1.83062216801476*i,0.469329612777204+1.88302305438216*i,
	0.376940216585768+1.92623758999529*i,0.280629399514361+1.95981620122199*i,
	0.18139911156039+1.9834095598097*i,0.0802816748428179+1.99677221705083*i,
	-0.0216709559510432+1.99976515725853*i,-0.123398137362174+1.99235724398804*i,
	-0.223841571348357+1.97462554395845*i,-0.321956315072615+1.94675452530467*i,
	-0.416721651753495+1.90903413850077*i,-0.50715170948451+1.86185679991919*i,
	-0.592305717552002+1.80571330940677*i,-0.671297793551928+1.74118774434843*i,
	-0.743306159487279+1.66895138333684*i,-0.807581690968333+1.58975572266213*i,
	-0.863455710575885+1.50442465827306*i,-0.910346944310781+1.41384591454311*i,
	-0.947767568759744+1.31896180901049*i,-0.975328286067044+1.22075944916928*i,
	-0.99274237391556+1.12026046329738*i,-0.999828668384089+1.01851037215451*i,
	-0.996513448649363+0.916567712119632*i,-0.982831203925632+0.815493022922998*i,
	-0.95892427466314+0.71633781453678*i];
    Laps = 100;
    TimerOn = 0;
    ThePen = [$l:=0.1, $L:=0.5, 0, l*i, l*i+L*exp(3*i*pi/4), -l+L*exp(3*i*pi/4), -l];
    StrFonc = "sin(t)+i*(1-cos(t))";

Mac
    f = sin(%1)+i*(1-cos(%1));

    Init = [
	Last:=Nil, stock:=Nil, TimerOn:=0,
	Bouton(RefPoint, "&Parametrage","ChangeFonc()","Changer le paramétrage et/ou les attributs"),
	Bouton(RefPoint+DeltaB, "&Tracer/Arrêter","Lancer()","Lancer/Arrêter l'animation"),
	Bouton(RefPoint+2*DeltaB, "&Réinitialiser", "Reinitialiser()", "Tout effacer"),
	
	TimerMac("[Insert(stock,Last[1]), Del(Last,1,1), if Last=Nil then timer(0) fi, ReCalc(courbe)]"),
	
	ReCalc(courbe)
	];

    timer = [TimerOn:=%1>0, Timer(%1)];

    Lancer = if TimerOn then timer(0)
	elif Last=Nil
	  then
	      stock:=Nil, ReCalc(courbe),
	      Last:=Get(Courbe(f(t),2)),
	      timer(Laps)
	  else timer(Laps)
	fi;

    ChangeFonc = if TimerOn=0 then
	   GetAttr(courbe),
	   if Input(["Entrez le paramétrage de la courbe sous forme complexe (et ses attributs)",LF,
	             "Exemple f(t)= t+i*t^2"],
	  "Changer le paramètrage de la courbe et/ou ses attributs", StrFonc) then
	 StrFonc:=chaine(),
	 DefMac("f", chaine(),t),
	 Last:=1/0, stock:=1/0,
	 ReCalc(courbe)
	fi
	fi;

    Reinitialiser = if TimerOn=0 then
	   Timer(0), Last:=Nil, stock:=Nil,
	   ReCalc(courbe)
	fi;

Cmd	[DotScale:=1+i];
Graph fond = [
	background(full,aliceblue),
	Color:= Rgb(0.75,0.75,0.75), Width:=2,
	LineStyle:=solid,
	Grille(0,0.25*(1+i)),
	Width:=6, Arrows:=1, Color:=black,
	Axes(0,1+i)
	];
Cmd	[Width:=8,Color:=255,DotStyle:=2];
Graph courbe = [Ligne(stock,0),
	if Last<>Nil then
	   FillStyle:=full, FillColor:=gray, Color:=black,
	   $u:=stock[-1], Ligne(shift(ThePen,u),1)
	fi
	];
